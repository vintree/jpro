/**
    2015-10-06
    lazing V 0.1
    wuguzix@foxmail.com
    
    TODO1 脱离jQuery
    TODO2 滚动慢偏移
*/
(function(c,b){var a={let:{name:".lazy",time:1000,delay:0,offset:"20",orien:"left",lazy:false,repe:false,view:false,easing:"swing"},config:[],lazyconfig:[],setConfig:function(){var f=0,d=arguments[0].length,g=null,e={};for(;f<d;f++){for(g in this.let){if(arguments[0][f].hasOwnProperty(g)){e[g]=arguments[0][f][g]||this.let[g]}else{e[g]=this.let[g]}}if(e.lazy){this.lazyconfig.push(e);this.register[e.name]={view:e.view,repe:e.repe}}else{this.config.push(e)}e={}}},hide:function(){var d=arguments[0].length,e=0;for(;e<d;e++){c(arguments[0][e].name).css("opacity",0)}},working:function(){var k=null,l=null,d=arguments[0].length,f=0,g=null,j=null,h=null,e=null;for(;f<d;f++){g={};j={};h={};e={};l=arguments[0][f];k=c(l.name);g=k.attr("style");h["position"]=k.css("position")==="static"?"relative":k.css("position");h["opacity"]=1;h[l.orien]=k.css(l.orien)==="auto"?"0":k.css(l.orien);j={position:h["position"],};j[l.orien]=parseInt(l.offset,10)+parseInt(h[l.orien],10)+"px";k.css(j);k.show();k.animate(h,l.time,l.easing,function(){})}this.lazy()},unlazy:function(){this.working(this.config)},lazy:function(){var d=this,o=d.lazyconfig,h=o.length,j=0,q=null,p=c(window).height(),e=c(window).width(),g=c(window).scrollTop(),m=c(window).scrollLeft(),f=null,k=null,n=null,r=null;for(;j<h;j++){q=o[j];f=c(q.name).height();k=c(q.name).width();n=c(q.name).scrollTop()||c(q.name)[0].offsetTop;r=c(q.name).scrollLeft()||c(q.name)[0].offsetLeft;if(d.register[q.name].view){if(!((p+g-100)-n>0&&(p+g-100)-n-p<0)){if(d.register[q.name].repe){d.hide([q]);d.register[q.name].view=false}}}else{if((p+g-100)-n>0&&(p+g-100)-n-p<0){d.register[q.name].view=true;d.working([q])}}}},srcoll:function(){var d=this;d.lazy();c(window).on("scroll",function(){d.lazy()})},register:{},init:function(){this.setConfig(arguments[0]);this.hide(arguments[0]);this.unlazy();this.srcoll()}};window.lazy=a})(jQuery,window);